---
title: "SDK Quickstart"
description: "Get up and running with Metorial in under 5 minutes"
---

<Note>
**What you'll learn:**
- How to install the Metorial SDK
- Available AI providers and integrations
- How to create sessions and use tools
- OAuth flow for authenticated services
- Streaming and session management

**Before you begin:**
- [Create API Keys](/docs/getting-started/api-keys)

**References:**
- [GitHub: metorial-node](https://github.com/metorial/metorial-node)
- [GitHub: metorial-python](https://github.com/metorial/metorial-python)
</Note>

## Prerequisites

1. **Metorial API key**: Get one from [app.metorial.com](https://app.metorial.com)
2. **Server deployment ID**: Deploy a server (e.g., Exa for search)
3. **AI provider API key**: OpenAI, Anthropic, Google, etc.

## Installation

Install the core SDK and a provider package for your AI model:

<CodeGroup>
```bash TypeScript
# Install the core SDK
npm install metorial

# Install a provider package (choose one or more)
npm install @metorial/ai-sdk      # Vercel AI SDK (recommended)
npm install @metorial/anthropic   # Anthropic Claude
npm install @metorial/openai      # OpenAI
npm install @metorial/google      # Google Gemini
npm install @metorial/mistral     # Mistral
npm install @metorial/deepseek    # DeepSeek
```

```bash Python
# Install the SDK
pip install metorial

# Install your AI provider
pip install anthropic   # For Claude
pip install openai      # For OpenAI/DeepSeek
```
</CodeGroup>

We support OpenAI, Anthropic, Google, Mistral, DeepSeek, and any OpenAI-compatible API. See the [TypeScript SDK](https://github.com/metorial/metorial-node) and [Python SDK](https://github.com/metorial/metorial-python) repos for all available providers.

## Your First AI Agent

<CodeGroup>
```typescript TypeScript
import { Metorial } from 'metorial';
import { metorialAiSdk } from '@metorial/ai-sdk';
import { anthropic } from '@ai-sdk/anthropic';
import { streamText } from 'ai';

let metorial = new Metorial({
    apiKey: process.env.METORIAL_API_KEY
});

await metorial.withProviderSession(
    metorialAiSdk,
    {
        serverDeployments: [{ serverDeploymentId: 'your-deployment-id' }],
        streaming: true
    },
    async ({ tools, closeSession }) => {
        let result = streamText({
            model: anthropic('claude-sonnet-4-5'),
            prompt: 'Search for the latest AI research',
            tools,
            onFinish: async () => {
                await closeSession();
            }
        });

        for await (let textPart of result.textStream) {
            process.stdout.write(textPart);
        }
    }
);
```

```python Python
import asyncio
import os
from metorial import Metorial, MetorialAnthropic
from anthropic import AsyncAnthropic

async def main():
    metorial = Metorial(api_key=os.getenv("METORIAL_API_KEY"))
    anthropic = AsyncAnthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))

    async def session_handler(session):
        messages = [{"role": "user", "content": "Search for the latest AI research"}]

        response = await anthropic.messages.create(
            model="claude-sonnet-4-20250514",
            max_tokens=1024,
            messages=messages,
            tools=session["tools"]
        )

        # Handle tool calls if any
        tool_calls = [c for c in response.content if c.type == "tool_use"]
        if tool_calls:
            tool_responses = await session["callTools"](tool_calls)
            messages.append({"role": "assistant", "content": response.content})
            messages.extend(tool_responses)

        print(response.content)

    await metorial.with_provider_session(
        MetorialAnthropic,
        [{"serverDeploymentId": "your-deployment-id"}],
        session_handler
    )

asyncio.run(main())
```
</CodeGroup>

## OAuth Flow

For services requiring user authentication (Slack, GitHub, Google Calendar), use OAuth sessions:

<CodeGroup>
```typescript TypeScript
import { Metorial } from 'metorial';
import { metorialAnthropic } from '@metorial/anthropic';

let metorial = new Metorial({
    apiKey: process.env.METORIAL_API_KEY
});

// 1. Create OAuth sessions for each service
let slackOAuth = await metorial.oauth.sessions.create({
    serverDeploymentId: 'your-slack-deployment-id',
    callbackUrl: 'https://yourapp.com/oauth/callback'
});

let calendarOAuth = await metorial.oauth.sessions.create({
    serverDeploymentId: 'your-google-cal-deployment-id',
    callbackUrl: 'https://yourapp.com/oauth/callback'
});

// 2. Send OAuth URLs to your user
console.log('Authorize Slack:', slackOAuth.url);
console.log('Authorize Calendar:', calendarOAuth.url);

// 3. Wait for user to complete OAuth
await metorial.oauth.waitForCompletion([slackOAuth.id, calendarOAuth.id]);

// 4. Use authenticated sessions
await metorial.withProviderSession(
    metorialAnthropic,
    {
        serverDeployments: [
            {
                serverDeploymentId: 'your-slack-deployment-id',
                oauthSessionId: slackOAuth.id
            },
            {
                serverDeploymentId: 'your-google-cal-deployment-id',
                oauthSessionId: calendarOAuth.id
            },
            {
                serverDeploymentId: 'your-exa-deployment-id' // No OAuth needed
            }
        ]
    },
    async ({ tools, closeSession }) => {
        // Use tools from all three services
        await closeSession();
    }
);
```

```python Python
import asyncio
from metorial import Metorial, MetorialAnthropic

async def main():
    metorial = Metorial(api_key="your-metorial-api-key")

    # 1. Create OAuth sessions
    slack_oauth = await metorial.oauth.sessions.create(
        server_deployment_id="your-slack-deployment-id",
        callback_url="https://yourapp.com/oauth/callback"
    )

    # 2. Send OAuth URL to user
    print(f"Authorize Slack: {slack_oauth.url}")

    # 3. Wait for completion
    await metorial.oauth.wait_for_completion([slack_oauth.id])

    # 4. Use authenticated session
    async def handler(session):
        # Use tools
        pass

    await metorial.with_provider_session(
        MetorialAnthropic,
        [{
            "serverDeploymentId": "your-slack-deployment-id",
            "oauthSessionId": slack_oauth.id
        }],
        handler
    )

asyncio.run(main())
```
</CodeGroup>

## Session Options

### Streaming Mode

Enable streaming when using tool calls with streaming responses:

<CodeGroup>
```typescript TypeScript
await metorial.withProviderSession(
    metorialAiSdk,
    {
        serverDeployments: ['your-deployment-id'],
        streaming: true // Required for streaming with tool calls
    },
    async ({ tools, closeSession }) => {
        // Your streaming code
        await closeSession();
    }
);
```

```python Python
await metorial.with_provider_session(
    MetorialAnthropic,
    [{"serverDeploymentId": "your-deployment-id"}],
    session_handler,
    streaming=True  # Required for streaming with tool calls
)
```
</CodeGroup>

### Closing Sessions

Always close your session when done to free up resources:

<CodeGroup>
```typescript TypeScript
async ({ tools, closeSession }) => {
    // Use tools...

    // For streaming, close in onFinish callback:
    let result = streamText({
        tools,
        onFinish: async () => {
            await closeSession();
        }
    });

    // Or close directly when done:
    await closeSession();
}
```

```python Python
async def session_handler(session):
    # Use tools...

    # Close when done:
    await session["closeSession"]()
```
</CodeGroup>

## Error Handling

<CodeGroup>
```typescript TypeScript
import { MetorialAPIError } from 'metorial';

try {
    await metorial.withProviderSession(/* ... */);
} catch (error) {
    if (error instanceof MetorialAPIError) {
        console.error(`API Error: ${error.message} (Status: ${error.status})`);
    } else {
        console.error('Unexpected error:', error);
    }
}
```

```python Python
from metorial import MetorialAPIError

try:
    await metorial.with_provider_session(...)
except MetorialAPIError as e:
    print(f"API Error: {e.message} (Status: {e.status})")
except Exception as e:
    print(f"Unexpected error: {e}")
```
</CodeGroup>

## What's Next?

<CardGroup cols={2}>
  <Card title="OAuth Integration" href="/sdk-oauth-overview">
    Handle user authorization for services like Slack and GitHub.
  </Card>
  <Card title="Provider Examples" href="/sdk-providers-overview">
    Use with OpenAI, Anthropic, Google, and more.
  </Card>
</CardGroup>
